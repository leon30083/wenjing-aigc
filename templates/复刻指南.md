# 如何在新项目中复刻 WinJin 开发模式

> **目标**：将 WinJin 项目的文档架构和开发方式复刻到新项目
> **时间**：约 30-45 分钟
> **难度**：⭐⭐ 中等

---

## 🎯 复刻的核心内容

### **你会得到**：

✅ **三层文档架构**
- CLAUDE.md（项目门面）
- .claude/rules/（详细规范）
- .claude/skills/[project]-dev/（项目特定）

✅ **Plan-First 开发流程**
- 先规划后实现
- 自动化测试验证
- 文档同步更新

✅ **错误模式管理**
- 按类型分类的错误库
- 持续迭代优化

✅ **模板系统**
- 开箱即用的文档模板
- 清晰的更新流程

---

## 📋 复刻步骤（5 步完成）

### **Step 1: 复制模板文件（5 分钟）**

```bash
# 1. 进入新项目目录
cd /path/to/your-new-project

# 2. 复制 .claude 模板
cp -r D:/user/github/winjin/templates/.claude .

# 3. 复制 docs 模板
cp -r D:/user/github/winjin/templates/docs .

# 4. 验证结构
ls -la .claude/rules/
ls -la .claude/skills/
ls -la docs/
```

**预期结果**：
```
your-new-project/
├── .claude/
│   ├── rules/
│   │   ├── quick-reference-template.md
│   │   ├── base-template.md
│   │   ├── code-template.md
│   │   ├── error-patterns-template.md
│   │   ├── skill-template.md
│   │   ├── docs.md
│   │   └── init.md
│   └── skills/
│       └── [your-project]-dev/
│           └── references/
└── docs/
    ├── HANDOVER-TEMPLATE.md
    └── BEST_PRACTICES-TEMPLATE.md
```

---

### **Step 2: 创建 CLAUDE.md（5 分钟）**

```bash
# 在项目根目录创建 CLAUDE.md
cat > CLAUDE.md << 'EOF'
# [Your Project Name] 项目开发规范

## 项目概述

[Your Project Name] 是一个基于 [技术栈] 的 [项目类型] 项目。

**核心功能：**
- 功能1：[描述]
- 功能2：[描述]
- 功能3：[描述]

---

## 时间获取

- 使用命令：`date +"%Y-%m-%d %H:%M:%S"`
- 时区：Asia/Shanghai

---

## 技术文档

**官方文档：**
- [框架1 官方文档](https://...)
- [框架2 官方文档](https://...)

---

## 开发规范

### 1. 代码风格

- **缩进**: 2 空格
- **引号**: 单引号 `'`
- **分号**: 必须使用
- **命名**: camelCase / PascalCase / kebab-case

### 2. API 设计

- 使用 async/await
- 统一响应格式：`{success, data/error}`
- 所有路由必须有错误处理

### 3. 参考文档位置

项目特定文档位于 `用户输入文件夹/` 目录：
- `用户输入文件夹/开发经验/` - 最佳实践
- `用户输入文件夹/开发对话/` - 开发记录

---

## 命令规范

| 命令 | 说明 |
|------|------|
| `npm start` | 启动应用 |
| `npm run dev` | 开发模式 |
| `npm test` | 运行测试 |

---

## 安全规范

- 不硬编码 API Key（使用环境变量）
- 不直接修改数据库文件
- 所有输入必须验证

---

## 📚 详细文档

- **开发流程**: `.claude/rules/quick-reference.md` ⭐ 开发前必读
- **技术规范**: `.claude/rules/base.md`
- **代码规范**: `.claude/rules/code.md`
- **错误模式**: `.claude/rules/error-patterns.md` ⭐
- **项目特定**: `.claude/skills/[project]-dev/SKILL.md`

---

**最后更新**: YYYY-MM-DD
**维护者**: Your Name
EOF
```

---

### **Step 3: 初始化规则文件（10 分钟）**

#### **3.1 重命名模板文件**

```bash
# 进入 rules 目录
cd .claude/rules

# 重命名模板文件（去掉 -template 后缀）
mv quick-reference-template.md quick-reference.md
mv base-template.md base.md
mv code-template.md code.md
mv error-patterns-template.md error-patterns.md
```

#### **3.2 初始化 init.md**

编辑 `init.md`，填写项目信息：

```markdown
# [Project Name] 项目初始化指南

## 核心框架版本

| 框架/库 | 版本要求 | 说明 |
|---------|----------|------|
| [框架名] | ^1.0.0 | [用途] |
| [框架名] | ^2.0.0 | [用途] |

## 项目结构

[你的项目结构]
```

---

### **Step 4: 创建 Skill 文件（10 分钟）**

```bash
# 1. 创建 skill 目录
mkdir -p .claude/skills/[project]-dev/references

# 2. 复制 skill 模板
cp .claude/rules/skill-template.md .claude/skills/[project]-dev/SKILL.md

# 3. 编辑 SKILL.md，填写项目信息
```

**SKILL.md 最小配置**：

```markdown
---
name: [project-name]-dev
description: [Project Name] 开发规范和最佳实践
---

# [Project Name] 开发技能

## 项目概述

[Project Name] 是一个基于 [技术栈] 的 [项目类型] 项目。

**技术栈**:
- 后端: [后端框架] + Node.js
- 前端: [前端框架]
- 构建: [构建工具]
- 其他: [其他技术]

---

## 核心开发规范

### 1. [技术领域1] 规范

**规则描述**:
- 要点1
- 要点2
- 要点3

**示例**:
```javascript
// ✅ 正确示例
[正确代码]

// ❌ 错误示例
[错误代码]
```

### 2. [技术领域2] 规范

[类似结构...]

---

## 错误模式参考 ⭐

> **重要**: 所有错误模式已统一管理到 `.claude/rules/error-patterns.md`

### 快速链接

| 类型 | 错误数量 | 关键词 |
|------|----------|--------|
| [API 相关](../rules/error-patterns.md#api-相关) | N个 | [关键词] |
| [其他](../rules/error-patterns.md#其他) | N个 | ... |

### 高频错误（必读）

1. **错误1**: [高频错误1] ⭐⭐⭐
2. **错误2**: [高频错误2] ⭐⭐⭐

**查看完整错误模式**: [`.claude/rules/error-patterns.md`](../rules/error-patterns.md)

---

## 开发提示（精选）

### 1. [技术领域1] 优先级 ⭐⭐⭐

- 要点1
- 要点2
- 要点3

### 2. [技术领域2] 优先级 ⭐⭐⭐

- 要点1
- 要点2

---

## 项目结构

```
[project-name]/
├── src/                   # 源代码
│   ├── server/           # 后端代码
│   ├── client/           # 前端代码
│   └── shared/           # 共享代码
├── .claude/
│   ├── rules/           # 开发规则
│   └── skills/          # Claude Code skills
└── docs/                # 项目文档
```

## 参考文档

- `.claude/rules/quick-reference.md` - Plan-First 开发流程 ⭐
- `.claude/rules/base.md` - 技术栈、API 规范
- `.claude/rules/code.md` - 代码示例、最佳实践
- `.claude/rules/error-patterns.md` - 错误模式参考 ⭐
- `docs/HANDOVER.md` - 完整交接文档

---

**Skill 版本**: v1.0
**最后更新**: YYYY-MM-DD
**维护者**: Your Name
```

---

### **Step 5: 验证配置（5 分钟）**

```bash
# 1. 返回项目根目录
cd /path/to/your-new-project

# 2. 验证文件结构
tree .claude -L 3

# 3. 启动 Claude Code
claude-code .

# 4. 测试 AI 是否读取配置
# 在 Claude Code 中提问：
#    "请列出项目的技术栈"
#    "标准开发流程是什么？"
#    "项目中有哪些常见错误？"
```

**预期结果**：
- ✅ AI 能正确列出项目技术栈（来自 base.md）
- ✅ AI 能描述 Plan-First 流程（来自 quick-reference.md）
- ✅ AI 能引用错误模式（来自 error-patterns.md）

---

## ✅ 复刻检查清单

### 文件结构检查

- [ ] CLAUDE.md 已创建（根目录）
- [ ] .claude/rules/quick-reference.md 已重命名
- [ ] .claude/rules/base.md 已重命名
- [ ] .claude/rules/code.md 已重命名
- [ ] .claude/rules/error-patterns.md 已重命名
- [ ] .claude/rules/init.md 已初始化
- [ ] .claude/skills/[project]-dev/SKILL.md 已创建

### 内容检查

- [ ] CLAUDE.md 包含项目概述和基本规范
- [ ] base.md 包含项目的技术栈信息
- [ ] SKILL.md 包含项目特定的开发规范
- [ ] error-patterns.md 包含至少一个示例错误模式
- [ ] 所有文档的占位符已替换

### 功能检查

- [ ] 启动 Claude Code
- [ ] 提问 "请列出项目的技术栈" → AI 正确回答
- [ ] 提问 "标准开发流程是什么" → AI 描述 Plan-First
- [ ] 提问 "项目中有哪些常见错误" → AI 引用 error-patterns.md

---

## 🎯 复刻后立即做的事

### **1. 添加第一个错误模式**

在 `error-patterns.md` 中添加：

```markdown
## [项目类型] 相关

### 错误1: [第一个常见错误] `[类型]` ⭐⭐⭐

**现象**:
- [用户看到的症状1]
- [用户看到的症状2]

**根本原因**:
[详细说明根本原因]

**错误示例**:
```javascript
// ❌ 错误代码
[错误代码示例]
```

**正确示例**:
```javascript
// ✅ 正确代码
[正确代码示例]
```

**关键点**:
1. [关键点1]
2. [关键点2]
3. [关键点3]
```

### **2. 添加第一个开发提示**

在 `SKILL.md` 中添加：

```markdown
### 1. [技术领域1] 优先级 ⭐⭐⭐

- **提示1**: [具体建议]
- **提示2**: [具体建议]
- **提示3**: [具体建议]
```

### **3. 测试 Plan-First 流程**

```
User: "使用 plan 模式规划 [功能名称]"
AI:   [进入 Plan 模式，创建详细计划]
User: "批准"
AI:   [按照计划实施，更新文档]
```

---

## 🚀 复刻完成后

### **你现在拥有**：

✅ 完整的三层文档架构
✅ Plan-First 开发流程
✅ 错误模式管理体系
✅ 清晰的文档更新流程

### **下一步**：

1. **开始第一个功能开发**
   - 使用 Plan 模式规划
   - 遵循规范开发
   - 更新文档

2. **持续积累**
   - 发现错误 → 添加到 error-patterns.md
   - 总结经验 → 添加到 SKILL.md
   - 定期回顾 → 优化文档

3. **团队协作**
   - 分享文档给团队成员
   - 统一开发流程
   - 持续迭代改进

---

## 📊 复刻效果对比

| 项目 | 无文档架构 | 有文档架构 |
|------|-----------|-----------|
| **上手时间** | 2-3 天 | 2-3 小时 |
| **错误重复率** | 高（30-40%） | 低（5-10%） |
| **代码一致性** | 低 | 高 |
| **开发效率** | 1x | 1.5-2x |
| **交接成本** | 高 | 低 |

---

## 💡 最佳实践

### **DO ✅**

1. **完整复刻**
   - 不要只复制部分文件
   - 保持完整的文档结构

2. **及时定制**
   - 复刻后立即填写项目信息
   - 不要保留占位符

3. **持续更新**
   - 每次开发后更新文档
   - 错误模式及时添加

4. **团队共享**
   - 确保团队成员了解文档
   - 新人入职时培训

### **DON'T ❌**

1. **不要只复制不定制**
   - 占位符会误导 AI
   - 项目信息必须准确

2. **不要忽视错误模式**
   - 第一个错误最重要
   - 持续积累才有价值

3. **不要跳过验证**
   - 必须测试 AI 是否读取配置
   - 提问验证是关键

---

## 🆘 遇到问题？

### **问题1: AI 不读取配置**

**检查**:
1. CLAUDE.md 是否在项目根目录
2. .claude/ 目录结构是否正确
3. SKILL.md 的 YAML frontmatter 是否正确

**解决**:
```bash
# 验证 YAML frontmatter
head -10 .claude/skills/[project]-dev/SKILL.md

# 应该看到：
---
name: [project-name]-dev
description: [描述]
---
```

### **问题2: 错误模式找不到**

**检查**:
1. error-patterns.md 是否在 .claude/rules/ 目录
2. 文件名是否正确（不是 -template）

**解决**:
```bash
# 检查文件
ls -la .claude/rules/ | grep error

# 应该看到：
# error-patterns.md
```

### **问题3: Plan 模式不工作**

**检查**:
1. quick-reference.md 是否在 .claude/rules/ 目录
2. 文件名是否正确（不是 -template）

**解决**:
```bash
# 检查文件
ls -la .claude/rules/ | grep quick-reference

# 应该看到：
# quick-reference.md
```

---

## 📞 获取帮助

- **查看 WinJin 完整示例**: `D:\user\github\winjin\.claude\`
- **查看模板**: `D:\user\github\winjin\templates\`
- **查看架构对比**: `.claude/rules/architecture-comparison.md`

---

**最后更新**: 2026-01-06
**维护者**: WinJin AIGC 开发团队
