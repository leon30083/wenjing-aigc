# 快速参考 ⚡ 开发前必读

> **重要性**: 本文件包含开发前必须掌握的基础知识，请确保理解后再开始开发！

---

## ⭐ 开发流程规范（默认模式）⭐

> **核心原则**: 先规划后实现 - Plan First, Code Later

### 🎯 标准开发流程

```
用户提出需求
    ↓
1️⃣ Plan 模式（规划阶段）
   ├─ 分析需求范围
   ├─ 探索代码库
   ├─ 识别影响范围
   ├─ 设计实现方案
   ├─ 列出实施步骤
   ├─ 创建详细计划文档
   └─ 等待用户批准
    ↓
用户批准计划
    ↓
2️⃣ Code 模式（实现阶段）
   ├─ 按照计划实施
   ├─ 使用 TodoWrite 跟踪进度
   ├─ 完成开发
   ├─ 自动化测试验证
   └─ 提交代码
    ↓
3️⃣ 更新文档（如需要）
   └─ 按照 docs.md 规范更新文档
```

### 📋 何时使用 Plan 模式

**✅ 必须使用 Plan 模式**:
- **新功能实现**: 添加新的功能模块、新的组件
- **架构变更**: 涉及多个文件的修改
- **复杂重构**: 需要重新设计或重写的部分
- **不明确的需求**: 需要探索和澄清的问题
- **多文件修改**: 影响范围超过 3 个文件

**❌ 可以跳过 Plan 模式**:
- **单行修改**: 修复明显的拼写错误
- **简单Bug修复**: 错误信息明确的单点修复
- **文档更新**: 仅更新文档内容
- **注释添加**: 为现有代码添加注释

### 🔄 Plan 模式工作流

```bash
# 1. 进入 Plan 模式
# 用户命令: "使用plan模式规划xxx功能" 或 "进入plan模式"

# 2. Claude 自动执行:
#    - 分析需求
#    - 探索代码库（使用 Explore agent）
#    - 创建详细计划
#    - 生成计划文件

# 3. 用户审查计划
#    - 查看计划内容
#    - 提出修改意见（如需要）
#    - 批准计划

# 4. 退出 Plan 模式，开始实现
#    - Claude 按照计划执行
#    - 使用 TodoWrite 跟踪进度
#    - 完成后自动测试
```

### ⚠️ 关键注意事项

1. **Plan 模式是默认方式**: 除非是简单的单点修改，否则始终使用 Plan 模式
2. **计划必须详细**: 包含具体的文件路径、行号、代码示例
3. **等待批准**: 计划创建后必须等待用户明确批准才开始实现
4. **可调整**: 计划不是僵化的，实施过程中可以根据情况调整
5. **文档同步**: 复杂的功能完成后，按照 docs.md 规范更新相关文档

### 📊 Plan 模式示例

**示例1: 新功能开发**
```
User: 添加用户收藏功能
Claude: 进入 Plan 模式...
       [分析需求]
       [探索代码库]
       [创建详细计划]
       ✅ 计划已生成，请审查...
User: 批准
Claude: 开始实现...
       [按照计划实施]
       [测试验证]
       ✅ 功能完成
```

**示例2: Bug修复（简单）**
```
User: 修复拼写错误 "platfrom" → "platform"
Claude: [直接修复，无需 Plan 模式]
       ✅ 已完成
```

### 📌 最佳实践

- ✅ **复杂任务**: 总是先用 Plan 模式规划
- ✅ **探索未知**: 用 Plan 模式的 Explore agent 了解代码
- ✅ **文档先行**: Plan 文档本身就是设计文档
- ✅ **沟通桥梁**: 计划让用户了解将要做什么
- ❌ **避免跳过**: 不要因为"看起来简单"就跳过规划

---

## 1. 启动开发服务器

### 根据项目类型配置

**后端项目**:
```bash
# 启动后端服务器
npm run dev
# 或
npm start
```

**前端项目**:
```bash
# 启动前端开发服务器
npm run dev
# 通常运行在 http://localhost:3000 或 5173
```

**全栈项目**:
```bash
# 终端1: 启动后端
npm run server

# 终端2: 启动前端
npm run client
```

### 关键点

- ✅ **阅读 package.json**: 了解可用的脚本命令
- ✅ **检查端口占用**: 确保配置的端口未被占用
- ✅ **环境变量**: 复制 `.env.example` 到 `.env` 并填写配置

---

## 2. 测试目标区分 ⚠️ 易犯错误

| 环境 | 用途 | 测试目标 | 当前重点 |
|------|------|----------|----------|
| 开发服务器 | 功能开发 | 新功能实现 | ⭐ **YES** |
| 测试环境 | 集成测试 | 完整流程验证 | 按需 |
| 生产环境 | 线上运行 | 性能、稳定性 | NO |

### ❌ 错误操作

```bash
# 错误1: 在生产环境测试新功能
npm run prod
# ❌ 可能导致线上问题

# 错误2: 忘记启动依赖服务
npm run dev
# ❌ 前端可能无法连接后端 API
```

### ✅ 正确操作

```bash
# 1. 检查依赖服务
# 2. 启动开发服务器
npm run dev

# 3. 访问正确的地址
# 查看 package.json 或控制台输出
```

---

## 3. 常见问题快速排查

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 端口被占用 | 端口已被使用 | 修改配置或关闭占用进程 |
| 依赖安装失败 | 网络或权限问题 | 使用镜像、清除缓存、检查权限 |
| 环境变量未生效 | 未创建 .env 文件 | 复制 .env.example 并填写 |
| API 调用失败 | 后端未启动或端口错误 | 检查后端服务状态和端口配置 |

---

## 4. 开发流程推荐 ⭐

**完整开发流程**:
```bash
# 1. Plan 模式规划（复杂任务）
用户: "使用 plan 模式规划 xxx 功能"

# 2. 按照计划实施
Claude: [根据计划执行]

# 3. 测试验证
# 本地测试 + 自动化测试

# 4. 更新文档
按照 docs.md 规范更新相关文档

# 5. 提交代码
git add .
git commit -m "type: description"
```

---

## 5. 项目结构速查

```
[project-name]/
├── src/                   # 源代码
├── .claude/              # Claude Code 配置 ⭐
│   ├── rules/            # 开发规则
│   └── skills/           # 项目技能
├── docs/                 # 项目文档
├── tests/                # 测试文件
└── package.json          # 项目配置
```

---

## 6. 关键文档位置

| 文档 | 位置 | 用途 |
|------|------|------|
| **快速参考** | `.claude/rules/quick-reference.md` | **本文件，开发前必读** ⭐ |
| 开发流程 | `.claude/rules/quick-reference.md` | **Plan-First 标准流程** ⭐ |
| 技术规范 | `.claude/rules/base.md` | 技术栈、API 规范 |
| 代码规范 | `.claude/rules/code.md` | 代码示例、错误模式 |
| 文档规范 | `.claude/rules/docs.md` | 文档更新流程 |
| 项目技能 | `.claude/skills/[project]-dev/SKILL.md` | 项目特定规范 |
| 交接文档 | `docs/HANDOVER.md` | 项目交接文档 |

---

## 7. 技术栈速记

根据项目自定义，参考 base.md 中的详细说明。

---

**最后更新**: YYYY-MM-DD
**维护者**: [Your Name]
**版本**: v1.0 ⭐ 新增 Plan-First 流程
