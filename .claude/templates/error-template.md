# 错误模式模板

> 使用此模板快速创建新的错误模式文档

---

## 错误元信息

- **错误编号**: 自动分配（下一个可用的编号）
- **错误名称**: [简短描述]
- **类型标签**: `[主类型]` `[次类型]`
- **发现日期**: YYYY-MM-DD
- **严重程度**: ⭐⭐⭐ (高) / ⭐⭐ (中) / ⭐ (低)

---

## 错误描述

### 现象
- [用户看到的症状1]
- [用户看到的症状2]

### 根本原因
[详细说明问题的根本原因]

### 错误示例

```javascript
// ❌ 错误代码
[错误代码示例]
```

### 正确示例

```javascript
// ✅ 正确代码
[正确代码示例]
```

---

## 修复方案

### 手动修复步骤

1. [步骤1]
2. [步骤2]
3. [步骤3]

### 自动修复信息

- **可自动修复**: 是/否
- **修复脚本**: [fixers/xxx.js] 或 null
- **置信度**: [0-100]%
- **风险等级**: low/medium/high/critical
- **需要用户确认**: 是/否

### 关键点

1. [关键点1]
2. [关键点2]
3. [关键点3]

---

## 相关信息

- **相关错误**: 错误[N] - [相关错误名称]
- **参考文档**: [文档链接]
- **影响范围**: [受影响的文件/模块]

---

## 使用说明

### 如何使用此模板

1. 复制此模板到新文件
2. 填写错误信息
3. 添加到 `.claude/rules/error-patterns.md` 对应的类型章节
4. 如果可自动修复，在 `fix-strategies.json` 中添加策略
5. 如果需要修复器，创建 `fixers/xxx-fixer.js`
6. 运行 `npm run validate:all` 测试

### 类型标签定义

| 标签 | 说明 | 示例 |
|------|------|------|
| `API` | API 调用、端点、参数相关 | 双平台、轮询、端点、模型 |
| `React Flow` | React Flow 节点、连线、数据传递 | 节点间数据传递错误 |
| `Character` | 角色引用、显示、插入 | 角色插入替换全部内容 |
| `Form` | 表单字段、输入验证 | 表单字段缺少 id/name |
| `Storage` | localStorage、工作流持久化 | localStorage 数据未验证 |
| `UI` | UI渲染、显示问题 | 节点显示异常 |
| `Other` | 其他类型错误 | ... |

### 标题格式

```markdown
### 错误[N]: [错误名称] `[主类型]` `[次类型]` ⭐⭐⭐
```

**示例**:
```markdown
### 错误48: 优化节点错误使用双显示功能导致角色引用丢失 `Character` `优化` ⭐⭐⭐
```

### 错误模式存放位置

**⭐ 重要**: 所有错误模式统一存放在 `.claude/rules/error-patterns.md`

- SKILL.md 和 code.md 不再存放错误模式详情
- 这两个文档通过链接引用 error-patterns.md
- 新增错误时只需更新 error-patterns.md 一个文档

### 更新快速索引表

新增错误后，需要更新 `.claude/rules/error-patterns.md` 顶部的快速索引表：

```markdown
| 类型 | 错误数量 | 关键词 |
|------|----------|--------|
| [API 相关](#api-相关) | 8个 | 双平台、轮询、端点、模型、... |
```

### 检查清单

新增错误模式时，确保完成以下步骤：
- [ ] 标题包含正确的类型标签（1-2个）
- [ ] 内容添加到 `.claude/rules/error-patterns.md` 正确的类型章节下
- [ ] 更新快速索引表（错误数量 +1，关键词更新）
- [ ] 在 SKILL.md 中添加引用（如需要）
- [ ] 更新开发交接书.md 记录版本变更

---

**模板版本**: v1.0.0
**创建日期**: 2026-01-09
**维护者**: WinJin AIGC 开发团队
