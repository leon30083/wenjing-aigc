# WinJin AIGC - å¼€æºé‡æ„ç‰ˆæœ¬

> åŸºäºåŸç‰ˆ WinJin AIGC çš„å¼€æºé‡æ„ï¼Œç§»é™¤æ¿€æ´»éªŒè¯æœºåˆ¶ï¼Œä½¿ç”¨ç°ä»£æŠ€æœ¯æ ˆé‡æ–°å®ç°ã€‚
> **æ ¸å¿ƒç‰¹æ€§**: å¯è§†åŒ–å·¥ä½œæµç”»å¸ƒ - æ‹–æ‹½èŠ‚ç‚¹ï¼Œè‡ªç”±è¿æ¥ï¼Œä¸€é”®ç”Ÿæˆè§†é¢‘

[![Node.js Version](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-19.0.0-blue)](https://reactjs.org/)
[![React Flow](https://img.shields.io/badge/React_Flow-11.0.0-purple)](https://reactflow.dev/)
[![License](https://img.shields.io/badge/license-MIT-blue)](LICENSE)

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¨ å¯è§†åŒ–å·¥ä½œæµç”»å¸ƒ â­ æ ¸å¿ƒç‰¹æ€§

åŸºäº React Flow çš„å¯è§†åŒ–ç¼–è¾‘å™¨ï¼Œé€šè¿‡æ‹–æ‹½èŠ‚ç‚¹å’Œè¿çº¿æ„å»ºå¤æ‚çš„è§†é¢‘ç”Ÿæˆå·¥ä½œæµã€‚

**ç‰¹ç‚¹**:
- ğŸ–±ï¸ **æ‹–æ‹½å¼èŠ‚ç‚¹ç¼–è¾‘** - æ‹–æ‹½æ·»åŠ èŠ‚ç‚¹ï¼Œå¯è§†åŒ–è¿çº¿è¿æ¥
- ğŸ”— **æ™ºèƒ½æ•°æ®ä¼ é€’** - èŠ‚ç‚¹é—´è‡ªåŠ¨ä¼ é€’æ•°æ®ï¼Œæ”¯æŒè§’è‰²ã€å›¾ç‰‡ã€æç¤ºè¯ç­‰
- ğŸ’¾ **å·¥ä½œæµç®¡ç†** - ä¿å­˜ã€åŠ è½½ã€å¯¼å‡ºã€å¯¼å…¥å·¥ä½œæµ
- ğŸ”„ **å®æ—¶é¢„è§ˆ** - å®æ—¶æŸ¥çœ‹ä»»åŠ¡è¿›åº¦å’Œç”Ÿæˆç»“æœ

### ğŸ¬ è§†é¢‘ç”ŸæˆèŠ‚ç‚¹

**åŠŸèƒ½**: ç”Ÿæˆå•ä¸ªè§†é¢‘ï¼Œæ”¯æŒæ–‡æœ¬ç”Ÿæˆå’Œå›¾ç‰‡ç”Ÿæˆä¸¤ç§æ¨¡å¼

**ç‰¹æ€§**:
- âœ… **åŒå¹³å°æ”¯æŒ** - èšé‘«å¹³å°ã€è´è´å¹³å°ï¼ˆå†…ç½® API Keyï¼‰
- âœ… **è§’è‰²å¼•ç”¨** - æ”¯æŒä½¿ç”¨ `@username` æ ¼å¼å¼•ç”¨è§’è‰²
- âœ… **å‚è€ƒå›¾ç‰‡** - æ”¯æŒå¤šå¼ å‚è€ƒå›¾ç‰‡ç”Ÿæˆè§†é¢‘
- âœ… **æ—ç™½æ¨¡å¼** - ä»æ—ç™½å¤„ç†å™¨åŠ è½½ä¼˜åŒ–åçš„å¥å­
- âœ… **å‚æ•°é…ç½®** - æ¨¡å‹ã€æ—¶é•¿ï¼ˆ5/10/15/25ç§’ï¼‰ã€æ¯”ä¾‹ï¼ˆ16:9/9:16ï¼‰

### ğŸ‘¤ è§’è‰²ç³»ç»ŸèŠ‚ç‚¹

#### è§’è‰²åº“èŠ‚ç‚¹ (Character Library Node)
**åŠŸèƒ½**: ç®¡ç†å·²åˆ›å»ºçš„è§’è‰²åº“

**ç‰¹æ€§**:
- ğŸ“Š **æ˜¾ç¤ºæ‰€æœ‰è§’è‰²** - å¤´åƒã€åˆ«åã€ç”¨æˆ·å
- ğŸ” **æœç´¢å’Œç­›é€‰** - æŒ‰åç§°æœç´¢ï¼Œæ”¯æŒå…¨éƒ¨/æ”¶è—/æœ€è¿‘ä½¿ç”¨ç­›é€‰
- â­ **æ”¶è—åŠŸèƒ½** - æ ‡è®°å¸¸ç”¨è§’è‰²
- ğŸ“¤ **ä¼ é€åˆ°è§†é¢‘èŠ‚ç‚¹** - è¿æ¥åå¯é€‰æ‹©è§’è‰²ä¼ é€’ç»™è§†é¢‘ç”ŸæˆèŠ‚ç‚¹
- âœï¸ **è§’è‰²ç¼–è¾‘** - ç¼–è¾‘è§’è‰²åˆ«åã€åˆ é™¤è§’è‰²

#### è§’è‰²åˆ›å»ºèŠ‚ç‚¹ (Character Create Node)
**åŠŸèƒ½**: ä»å·²å®Œæˆçš„è§†é¢‘ä¸­æå–è§’è‰²

**ç‰¹æ€§**:
- ğŸ¯ **ä¸€é”®åˆ›å»º** - ä»ä»»åŠ¡ç»“æœèŠ‚ç‚¹åˆ›å»ºè§’è‰²
- ğŸ“¸ **æ—¶é—´æˆ³é€‰æ‹©** - é€‰æ‹©è§†é¢‘ä¸­çš„å…³é”®æ—¶åˆ»ï¼ˆ1-3ç§’èŒƒå›´ï¼‰
- ğŸ“‹ **åˆ›å»ºå†å²** - æŸ¥çœ‹æ‰€æœ‰åˆ›å»ºè®°å½•

#### è§’è‰²ç»“æœèŠ‚ç‚¹ (Character Result Node)
**åŠŸèƒ½**: æ˜¾ç¤ºè§’è‰²åˆ›å»ºä»»åŠ¡çš„è¯¦ç»†ç»“æœ

**ç‰¹æ€§**:
- ğŸ“‹ **æ˜¾ç¤ºè§’è‰²è¯¦æƒ…** - IDã€ç”¨æˆ·åã€åˆ«åã€å¤´åƒ
- ğŸ“ **å¤åˆ¶åŠŸèƒ½** - ä¸€é”®å¤åˆ¶è§’è‰² IDã€ç”¨æˆ·å

### ğŸ“– æ—ç™½å¤„ç†èŠ‚ç‚¹

#### æ—ç™½è¾“å…¥èŠ‚ç‚¹ (Narrator Input Node)
**åŠŸèƒ½**: è¾“å…¥å¤šè¡Œæ—ç™½æ–‡æœ¬ï¼ˆæ¯è¡Œä¸€ä¸ªå¥å­ï¼‰

**ç‰¹æ€§**:
- ğŸ“ **å¤šè¡Œè¾“å…¥** - æ”¯æŒæ¯è¡Œä¸€ä¸ªå¥å­çš„æ ¼å¼
- ğŸ‘¤ **è§’è‰²å¼•ç”¨** - æ”¯æŒåœ¨å¥å­ä¸­ä½¿ç”¨ `@username` å¼•ç”¨è§’è‰²
- ğŸ¨ **é£æ ¼é€‰æ‹©** - ç»˜æœ¬/ç”µå½±/çºªå½•ç‰‡/åŠ¨ç”»/è‡ªå®šä¹‰é£æ ¼
- â±ï¸ **æ—¶é•¿è®¾ç½®** - 5/10/15/25ç§’
- âš–ï¸ **ä¼˜åŒ–æ–¹å‘** - å¹³è¡¡/æ›´è¯¦ç»†/æ›´ç®€æ´/æ›´åˆ›æ„/æ›´ä¸“ä¸š

#### æ—ç™½å¤„ç†å™¨èŠ‚ç‚¹ (Narrator Processor Node)
**åŠŸèƒ½**: è°ƒç”¨ OpenAI API ä¼˜åŒ–æ—ç™½å¥å­

**ç‰¹æ€§**:
- ğŸš€ **æ‰¹é‡ä¼˜åŒ–** - ä¸€é”®ä¼˜åŒ–æ‰€æœ‰å¥å­
- ğŸ“Š **ä¼˜åŒ–è¿›åº¦** - å®æ—¶æ˜¾ç¤ºä¼˜åŒ–è¿›åº¦å’ŒçŠ¶æ€
- â®ï¸â­ï¸ **å¯¼èˆªåŠŸèƒ½** - ä¸Šä¸€å¥/ä¸‹ä¸€å¥åˆ‡æ¢
- ğŸ“‹ **å¤åˆ¶ç»“æœ** - ä¸€é”®å¤åˆ¶ä¼˜åŒ–åçš„æç¤ºè¯
- ğŸ”„ **é‡æ–°ä¼˜åŒ–** - å¯¹å•ä¸ªå¥å­æˆ–å…¨éƒ¨å¥å­é‡æ–°ä¼˜åŒ–
- ğŸ“º **æ—ç™½æ¨¡å¼** - ä¼ é€’ç»™è§†é¢‘ç”ŸæˆèŠ‚ç‚¹ï¼Œæ”¯æŒåŠ è½½å½“å‰å¥å­/ä¸‹ä¸€ä¸ªå¥å­

#### OpenAI é…ç½®èŠ‚ç‚¹ (OpenAI Config Node)
**åŠŸèƒ½**: é…ç½® OpenAI API ç”¨äºæç¤ºè¯ä¼˜åŒ–

**ç‰¹æ€§**:
- ğŸ”§ **çµæ´»é…ç½®** - æ”¯æŒè‡ªå®šä¹‰ Base URLã€API Keyã€æ¨¡å‹
- ğŸ§ª **æµ‹è¯•åŠŸèƒ½** - æµ‹è¯• API è¿æ¥æ˜¯å¦æ­£å¸¸
- ğŸ“‚ **åŠ è½½é…ç½®** - ä» localStorage åŠ è½½å·²ä¿å­˜çš„é…ç½®
- ğŸ—‘ï¸ **æ¸…é™¤é…ç½®** - æ¸…é™¤å½“å‰é…ç½®

### âš™ï¸ API è®¾ç½®èŠ‚ç‚¹ (API Settings Node)
**åŠŸèƒ½**: é…ç½®è§†é¢‘ç”Ÿæˆ API å‚æ•°

**ç‰¹æ€§**:
- ğŸŒ **åŒå¹³å°é€‰æ‹©** - èšé‘«å¹³å°ã€è´è´å¹³å°ï¼ˆå†…ç½®å¯†é’¥ï¼‰
- ğŸ¯ **æ¨¡å‹é€‰æ‹©** - æ ¹æ®å¹³å°è‡ªåŠ¨æ˜¾ç¤ºå¯ç”¨æ¨¡å‹
- ğŸ“ **æ¯”ä¾‹è®¾ç½®** - 16:9 æ¨ªå±ã€9:16 ç«–å±
- ğŸ’§ **æ°´å°é€‰é¡¹** - æ˜¯å¦æ·»åŠ æ°´å°

### ğŸ“º ä»»åŠ¡ç»“æœèŠ‚ç‚¹ (Task Result Node)
**åŠŸèƒ½**: æ˜¾ç¤ºè§†é¢‘ç”Ÿæˆä»»åŠ¡çš„å®æ—¶çŠ¶æ€å’Œæœ€ç»ˆç»“æœ

**ç‰¹æ€§**:
- ğŸ“Š **å®æ—¶è¿›åº¦** - æ˜¾ç¤ºä»»åŠ¡å¤„ç†è¿›åº¦ç™¾åˆ†æ¯”
- ğŸ”„ **è‡ªåŠ¨è½®è¯¢** - è‡ªåŠ¨æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
- ğŸ“¹ **è§†é¢‘é¢„è§ˆ** - ä»»åŠ¡å®Œæˆåæ˜¾ç¤ºè§†é¢‘æ’­æ”¾å™¨
- â¬‡ï¸ **ä¸‹è½½è§†é¢‘** - ä¸€é”®ä¸‹è½½ç”Ÿæˆçš„è§†é¢‘
- ğŸ”— **å¤åˆ¶é“¾æ¥** - å¤åˆ¶è§†é¢‘ URL
- ğŸ”„ **æ‰‹åŠ¨æŸ¥è¯¢** - æ‰‹åŠ¨åˆ·æ–°ä»»åŠ¡çŠ¶æ€

### ğŸ“ å·¥ä½œæµç®¡ç†

**åŠŸèƒ½**: ç®¡ç†å·¥ä½œæµçš„ä¿å­˜ã€åŠ è½½ã€å¯¼å‡ºã€å¯¼å…¥

**ç‰¹æ€§**:
- ğŸ’¾ **ä¿å­˜å·¥ä½œæµ** - ä¿å­˜å½“å‰èŠ‚ç‚¹å’Œè¿çº¿åˆ°æœ¬åœ°å­˜å‚¨
- ğŸ“‚ **åŠ è½½å·¥ä½œæµ** - ä»å·²ä¿å­˜çš„å·¥ä½œæµåˆ—è¡¨åŠ è½½
- ğŸ—‘ï¸ **åˆ é™¤å·¥ä½œæµ** - åˆ é™¤æŒ‡å®šå·¥ä½œæµï¼ˆå¸¦ç¡®è®¤ï¼‰
- ğŸ“¤ **å¯¼å‡ºå·¥ä½œæµ** - å¯¼å‡ºä¸º JSON æ–‡ä»¶
- ğŸ“¥ **å¯¼å…¥å·¥ä½œæµ** - ä» JSON æ–‡ä»¶å¯¼å…¥

**âš ï¸ å·²çŸ¥é™åˆ¶**:
- å·¥ä½œæµé‡å‘½ååŠŸèƒ½æš‚æœªå®ç°

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
winjin/
â”œâ”€â”€ .claude/                      # Claude Code é…ç½®å’Œå¼€å‘è§„èŒƒ
â”‚   â”œâ”€â”€ rules/                    # å¼€å‘è§„åˆ™æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ base.md               # æŠ€æœ¯æ ˆçº¦æŸ
â”‚   â”‚   â”œâ”€â”€ code.md               # ä»£ç è§„èŒƒ
â”‚   â”‚   â”œâ”€â”€ error-patterns.md     # é”™è¯¯æ¨¡å¼å‚è€ƒ
â”‚   â”‚   â””â”€â”€ quick-reference.md    # å¿«é€Ÿå‚è€ƒ â­ å¼€å‘å‰å¿…è¯»
â”‚   â”œâ”€â”€ templates/                # æ–‡æ¡£æ¨¡æ¿
â”‚   â””â”€â”€ metrics/                  # éªŒè¯æŒ‡æ ‡æ•°æ®
â”œâ”€â”€ data/                         # æ•°æ®æŒä¹…åŒ–ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ history.json              # å†å²è®°å½•
â”‚   â””â”€â”€ characters.json           # è§’è‰²åº“
â”œâ”€â”€ downloads/                    # è§†é¢‘ä¸‹è½½ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”œâ”€â”€ docs/                         # é¡¹ç›®æ–‡æ¡£ â­ Phase 3
â”‚   â””â”€â”€ validation-guide.md       # éªŒè¯ç³»ç»Ÿä½¿ç”¨æŒ‡å—
â”œâ”€â”€ reference/                    # å‚è€ƒæ–‡æ¡£
â”‚   â””â”€â”€ ç”¨æˆ·è¾“å…¥æ–‡ä»¶å¤¹/
â”‚       â”œâ”€â”€ å¼€å‘ç»éªŒ/             # å¼€å‘æ–‡æ¡£
â”‚       â”œâ”€â”€ èšé‘«sora2/            # èšé‘« API æ–‡æ¡£
â”‚       â””â”€â”€ è´è´å·¥åŠ/             # è´è´ API æ–‡æ¡£
â”œâ”€â”€ scripts/                      # éªŒè¯å’Œä¿®å¤è„šæœ¬ â­ Phase 3
â”‚   â”œâ”€â”€ auto-fix.js               # è‡ªåŠ¨ä¿®å¤å·¥å…·
â”‚   â”œâ”€â”€ validate-*.js             # éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ detect-*.js               # æ£€æµ‹è„šæœ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server/                   # Express åç«¯ API
â”‚   â”‚   â”œâ”€â”€ index.js              # ä¸»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ sora2-client.js       # Sora2 API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ history-storage.js    # å†å²è®°å½•å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ character-storage.js  # è§’è‰²åº“å­˜å‚¨
â”‚   â”‚   â””â”€â”€ services/             # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ openaiClient.js   # OpenAI API å®¢æˆ·ç«¯ â­ æ–°å¢
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ client/                   # React å‰ç«¯ï¼ˆå·¥ä½œæµç”»å¸ƒï¼‰â­ æ ¸å¿ƒ
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ nodes/            # è‡ªå®šä¹‰èŠ‚ç‚¹ â­ æ ¸å¿ƒ
â”‚       â”‚   â”‚   â”œâ”€â”€ input/        # è¾“å…¥èŠ‚ç‚¹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ APISettingsNode.jsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterLibraryNode.jsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ NarratorNode.jsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ OpenAIConfigNode.jsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ ReferenceImageNode.jsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ TextNode.jsx
â”‚       â”‚   â”‚   â”œâ”€â”€ output/       # è¾“å‡ºèŠ‚ç‚¹
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ CharacterResultNode.jsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ TaskResultNode.jsx
â”‚       â”‚   â”‚   â””â”€â”€ process/      # å¤„ç†èŠ‚ç‚¹
â”‚       â”‚   â”‚       â”œâ”€â”€ CharacterCreateNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ JuxinStoryboardNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ NarratorProcessorNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ PromptOptimizerNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ StoryboardNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ VideoGenerateNode.jsx
â”‚       â”‚   â”‚       â”œâ”€â”€ VideoNode.jsx
â”‚       â”‚   â”‚       â””â”€â”€ ZhenzhenStoryboardNode.jsx
â”‚       â”‚   â”œâ”€â”€ components/      # UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ hooks/           # ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ App.jsx          # ä¸»åº”ç”¨
â”‚       â”‚   â””â”€â”€ main.jsx         # å…¥å£
â”‚       â””â”€â”€ package.json         # å‰ç«¯ä¾èµ–
â”œâ”€â”€ .env.example                  # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â””â”€â”€ CLAUDE.md                     # é¡¹ç›®å¼€å‘è§„èŒƒ â­ å¿…è¯»
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¿«é€Ÿå¯åŠ¨ âš¡

#### Windows ç”¨æˆ·ï¼ˆæ¨èï¼‰

**ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ**:
åŒå‡»è¿è¡Œ `start-dev.bat` å³å¯ã€‚

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ£€æŸ¥ Node.js å’Œ npm æ˜¯å¦å®‰è£…
2. âœ… æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼‰
3. âœ… æ£€æŸ¥ç«¯å£ 9000 å’Œ 5173 æ˜¯å¦è¢«å ç”¨ï¼ˆè¯¢é—®æ˜¯å¦æ¸…ç†ï¼‰
4. âœ… å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼ˆç«¯å£ 9000ï¼‰
5. âœ… å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 5173ï¼‰
6. âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173/

**åœæ­¢å¼€å‘ç¯å¢ƒ**:
åŒå‡»è¿è¡Œ `stop-dev.bat` å³å¯åœæ­¢æ‰€æœ‰æœåŠ¡ã€‚

#### æ‰‹åŠ¨å¯åŠ¨ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

å¦‚æœéœ€è¦æ‰‹åŠ¨å¯åŠ¨ï¼Œè¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

**æ­¥éª¤ 1: å¯åŠ¨åç«¯æœåŠ¡å™¨**ï¼ˆç»ˆç«¯1ï¼‰
```bash
npm run server
```

**æ­¥éª¤ 2: å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**ï¼ˆç»ˆç«¯2ï¼‰
```bash
cd src/client
npm run dev
```

**æ­¥éª¤ 3: æµè§ˆå™¨è®¿é—®**
```
http://localhost:5173/
```

**âš ï¸ æ³¨æ„**:
- å¿…é¡»åŒæ—¶è¿è¡Œä¸¤ä¸ªæœåŠ¡å™¨ï¼ˆåç«¯ + å‰ç«¯ï¼‰
- è®¿é—® 5173 ç«¯å£ï¼ˆå·¥ä½œæµç”»å¸ƒï¼‰ï¼Œä¸æ˜¯ 9000 ç«¯å£
- 9000 ç«¯å£æ˜¯åç«¯ APIï¼Œä¸ç›´æ¥è®¿é—®

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 16.0.0
- **npm**: >= 8.0.0

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/leon30083/wenjing-aigc.git
cd wenjing-aigc

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Keyï¼ˆæˆ–ä½¿ç”¨å†…ç½®å¯†é’¥ï¼‰

# 4. å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run server     # ç»ˆç«¯1
cd src/client && npm run dev   # ç»ˆç«¯2

# 5. æµè§ˆå™¨è®¿é—®
# http://localhost:5173/
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶å†…å®¹ï¼ˆå¯é€‰ï¼Œé¡¹ç›®å·²å†…ç½®åŒå¹³å°å¯†é’¥ï¼‰
SORA2_API_KEY=sk-your-juxin-api-key      # èšé‘«å¹³å° API Keyï¼ˆå¯é€‰ï¼‰
ZHENZHEN_API_KEY=sk-your-zhenzhen-api-key # è´è´å¹³å° API Keyï¼ˆå¯é€‰ï¼‰
OPENAI_API_KEY=sk-your-openai-key         # OpenAI API Keyï¼ˆå¯é€‰ï¼‰
PORT=9000                                  # æœåŠ¡å™¨ç«¯å£
```

**ğŸ’¡ æç¤º**: é¡¹ç›®å·²å†…ç½®èšé‘«å’Œè´è´å¹³å°çš„ API Keyï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚éœ€ä½¿ç”¨è‡ªå·±çš„å¯†é’¥ï¼Œå¯åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ã€‚

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### å·¥ä½œæµç”»å¸ƒåŸºç¡€

#### æ·»åŠ èŠ‚ç‚¹

1. ç‚¹å‡»å·¥å…·æ çš„ **"+ æ·»åŠ èŠ‚ç‚¹"** æŒ‰é’®
2. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©èŠ‚ç‚¹ç±»å‹
3. æ–°èŠ‚ç‚¹ä¼šå‡ºç°åœ¨ç”»å¸ƒä¸­å¤®

#### è¿æ¥èŠ‚ç‚¹

1. æ‹–æ‹½æºèŠ‚ç‚¹çš„è¾“å‡ºç«¯å£ï¼ˆå³ä¾§åœ†ç‚¹ï¼‰åˆ°ç›®æ ‡èŠ‚ç‚¹çš„è¾“å…¥ç«¯å£ï¼ˆå·¦ä¾§åœ†ç‚¹ï¼‰
2. è¿æ¥çº¿ä¸Šä¼šæ˜¾ç¤ºç«¯å£åç§°
3. æ•°æ®ä¼šè‡ªåŠ¨ä»æºèŠ‚ç‚¹ä¼ é€’åˆ°ç›®æ ‡èŠ‚ç‚¹

#### åˆ é™¤èŠ‚ç‚¹

1. **å•ä¸ªåˆ é™¤**: å³é”®ç‚¹å‡»èŠ‚ç‚¹ â†’ é€‰æ‹©"åˆ é™¤èŠ‚ç‚¹"
2. **æ‰¹é‡åˆ é™¤**: é€‰ä¸­å¤šä¸ªèŠ‚ç‚¹ â†’ ç‚¹å‡»å·¥å…·æ "ğŸ—‘ï¸ åˆ é™¤é€‰ä¸­"æŒ‰é’®
3. **å¿«æ·é”®**: é€‰ä¸­èŠ‚ç‚¹åæŒ‰ Delete é”®

#### ç§»åŠ¨èŠ‚ç‚¹

æ‹–æ‹½èŠ‚ç‚¹æ ‡é¢˜æ å¯ç§»åŠ¨èŠ‚ç‚¹ä½ç½®

#### è°ƒæ•´èŠ‚ç‚¹å¤§å°

æ‹–æ‹½èŠ‚ç‚¹å³ä¸‹è§’çš„ä¸‰è§’å½¢ç¼©æ”¾æ‰‹æŸ„

### å…¸å‹å·¥ä½œæµç¤ºä¾‹

#### ç¤ºä¾‹ 1: ç®€å•è§†é¢‘ç”Ÿæˆ

```
[API è®¾ç½®] â†’ [è§†é¢‘ç”Ÿæˆ] â†’ [ä»»åŠ¡ç»“æœ]
```

**æ­¥éª¤**:
1. æ·»åŠ  API è®¾ç½®èŠ‚ç‚¹ï¼Œé…ç½®å¹³å°å’Œæ¨¡å‹
2. æ·»åŠ è§†é¢‘ç”ŸæˆèŠ‚ç‚¹ï¼Œè¾“å…¥æç¤ºè¯
3. æ·»åŠ ä»»åŠ¡ç»“æœèŠ‚ç‚¹ï¼ŒæŸ¥çœ‹ç”Ÿæˆç»“æœ
4. è¿æ¥èŠ‚ç‚¹ï¼šAPI è®¾ç½® â†’ è§†é¢‘ç”Ÿæˆ â†’ ä»»åŠ¡ç»“æœ

#### ç¤ºä¾‹ 2: å¸¦è§’è‰²çš„è§†é¢‘ç”Ÿæˆ

```
[è§’è‰²åº“] â†’ [è§†é¢‘ç”Ÿæˆ] â†’ [ä»»åŠ¡ç»“æœ]
             â†‘
        [API è®¾ç½®]
```

**æ­¥éª¤**:
1. æ·»åŠ è§’è‰²åº“èŠ‚ç‚¹ï¼Œé€‰æ‹©è¦ä½¿ç”¨çš„è§’è‰²
2. æ·»åŠ è§†é¢‘ç”ŸæˆèŠ‚ç‚¹ï¼Œåœ¨æç¤ºè¯ä¸­æ’å…¥è§’è‰²å¼•ç”¨
3. è¿æ¥è§’è‰²åº“åˆ°è§†é¢‘ç”ŸæˆèŠ‚ç‚¹
4. ç‚¹å‡»è§†é¢‘ç”ŸæˆèŠ‚ç‚¹çš„è§’è‰²å¡ç‰‡æ’å…¥ `@username`

#### ç¤ºä¾‹ 3: æ—ç™½ä¼˜åŒ– + è§†é¢‘ç”Ÿæˆ

```
[æ—ç™½è¾“å…¥] â†’ [æ—ç™½å¤„ç†å™¨] â†’ [è§†é¢‘ç”Ÿæˆ] â†’ [ä»»åŠ¡ç»“æœ]
                              â†‘
                         [OpenAI é…ç½®]
                              â†‘
                         [API è®¾ç½®]
```

**æ­¥éª¤**:
1. æ·»åŠ æ—ç™½è¾“å…¥èŠ‚ç‚¹ï¼Œè¾“å…¥å¤šè¡Œæ—ç™½
2. æ·»åŠ  OpenAI é…ç½®èŠ‚ç‚¹ï¼Œé…ç½® API
3. æ·»åŠ æ—ç™½å¤„ç†å™¨èŠ‚ç‚¹ï¼Œç‚¹å‡»"ğŸš€ å…¨éƒ¨ä¼˜åŒ–"
4. æ·»åŠ è§†é¢‘ç”ŸæˆèŠ‚ç‚¹ï¼Œç‚¹å‡»"ğŸ“¥ åŠ è½½å½“å‰æ—ç™½"
5. è¿æ¥æ‰€æœ‰èŠ‚ç‚¹
6. ç”Ÿæˆè§†é¢‘åï¼Œç‚¹å‡»"â­ï¸ ä¸‹ä¸€ä¸ª"ç”Ÿæˆä¸‹ä¸€ä¸ªå¥å­

#### ç¤ºä¾‹ 4: è§’è‰²åˆ›å»º

```
[è§†é¢‘ç”Ÿæˆ] â†’ [ä»»åŠ¡ç»“æœ] â†’ [è§’è‰²åˆ›å»º] â†’ [è§’è‰²ç»“æœ]
```

**æ­¥éª¤**:
1. å®Œæˆè§†é¢‘ç”Ÿæˆåï¼Œåœ¨ä»»åŠ¡ç»“æœèŠ‚ç‚¹ç‚¹å‡»"ğŸ‘¤ åˆ›å»ºè§’è‰²"
2. æ·»åŠ è§’è‰²åˆ›å»ºèŠ‚ç‚¹ï¼Œè‡ªåŠ¨å¡«å……è§†é¢‘ URL
3. æ·»åŠ è§’è‰²ç»“æœèŠ‚ç‚¹ï¼ŒæŸ¥çœ‹åˆ›å»ºç»“æœ
4. è¿æ¥èŠ‚ç‚¹å¹¶åˆ›å»ºè§’è‰²

---

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### å¥åº·æ£€æŸ¥

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/api/platform/list` | GET | è·å–æ”¯æŒçš„å¹³å°åˆ—è¡¨ |

### è§†é¢‘ç”Ÿæˆ

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/video/create` | POST | åˆ›å»ºè§†é¢‘ï¼ˆæ–‡ç”Ÿè§†é¢‘/å›¾ç”Ÿè§†é¢‘ï¼‰ |
| `/api/video/create-with-character` | POST | åˆ›å»ºè§†é¢‘ï¼ˆå¸¦è§’è‰²å‚è€ƒï¼‰ |
| `/api/video/storyboard` | POST | åˆ›å»ºæ•…äº‹æ¿è§†é¢‘ï¼ˆå¤šé•œå¤´ï¼‰ |
| `/api/video/download` | POST | ä¸‹è½½è§†é¢‘ |

### è§’è‰²ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/character/create` | POST | åˆ›å»ºè§’è‰² |
| `/api/character/list` | GET | è·å–è§’è‰²åˆ—è¡¨ |
| `/api/character/stats` | GET | è·å–è§’è‰²ç»Ÿè®¡ |
| `/api/character/:id` | GET | è·å–å•ä¸ªè§’è‰² |
| `/api/character/search/:query` | GET | æœç´¢è§’è‰² |
| `/api/character/:id` | DELETE | åˆ é™¤è§’è‰² |
| `/api/character/all` | DELETE | æ¸…ç©ºæ‰€æœ‰è§’è‰² |
| `/api/character/:username/favorite` | PUT | è®¾ç½®æ”¶è—çŠ¶æ€ â­ æ–°å¢ |

### ä»»åŠ¡æŸ¥è¯¢

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/task/:taskId` | GET | æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ |
| `/api/task/:taskId/wait` | GET | ç­‰å¾…ä»»åŠ¡å®Œæˆ |

### å†å²è®°å½•

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/history/list` | GET | è·å–å†å²è®°å½• |
| `/api/history/stats` | GET | è·å–ç»Ÿè®¡ä¿¡æ¯ |
| `/api/history/:taskId` | GET | è·å–å•æ¡è®°å½• |
| `/api/history/:taskId` | DELETE | åˆ é™¤è®°å½• |
| `/api/history/all` | DELETE | æ¸…ç©ºæ‰€æœ‰è®°å½• |

### OpenAI API â­ æ–°å¢

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/openai/optimize` | POST | ä¼˜åŒ–æç¤ºè¯ |

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºè§†é¢‘ï¼ˆAPI è°ƒç”¨ï¼‰

```bash
curl -X POST http://localhost:9000/api/video/create \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "juxin",
    "prompt": "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨ç©è€",
    "model": "sora-2-all",
    "orientation": "landscape",
    "duration": 10,
    "size": "small"
  }'
```

### 2. åˆ›å»ºè§’è‰²ï¼ˆä»ä»»åŠ¡ï¼‰

```bash
curl -X POST http://localhost:9000/api/character/create \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "zhenzhen",
    "from_task": "video_xxx",
    "timestamps": "1,3"
  }'
```

### 3. ä¼˜åŒ–æç¤ºè¯ï¼ˆæ—ç™½ï¼‰â­ æ–°å¢

```bash
curl -X POST http://localhost:9000/api/openai/optimize \
  -H "Content-Type: application/json" \
  -d '{
    "base_url": "https://api.deepseek.com",
    "api_key": "sk-xxx",
    "model": "deepseek-chat",
    "prompt": "ä¸€åªå°çŒ«åœ¨ç©è€",
    "style": "picture-book",
    "context": {
      "target_duration": 10,
      "characters": [{
        "username": "ebfb9a758.sunnykitte",
        "alias": "æµ‹è¯•å°çŒ«"
      }]
    }
  }'
```

---

## ğŸ“š å¼€å‘æ–‡æ¡£

| æ–‡æ¡£ | ä½ç½® | è¯´æ˜ |
|------|------|------|
| **å¿«é€Ÿå‚è€ƒ** â­ å¿…è¯» | `.claude/rules/quick-reference.md` | å¼€å‘å‰å¿…è¯» |
| **å¼€å‘äº¤æ¥ä¹¦** | `reference/ç”¨æˆ·è¾“å…¥æ–‡ä»¶å¤¹/å¼€å‘ç»éªŒ/å¼€å‘äº¤æ¥ä¹¦.md` | é¡¹ç›®è¿›åº¦è®°å½• |
| **è§’è‰²åˆ›å»ºæœ€ä½³å®è·µ** | `reference/ç”¨æˆ·è¾“å…¥æ–‡ä»¶å¤¹/å¼€å‘ç»éªŒ/Sora2_Character_Best_Practices.md` | Sora2 è§’è‰²ç³»ç»Ÿ |
| **é”™è¯¯æ¨¡å¼å‚è€ƒ** â­ é‡è¦ | `.claude/rules/error-patterns.md` | 55+ å·²çŸ¥é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ |
| **éªŒè¯ç³»ç»ŸæŒ‡å—** â­ Phase 3 | `docs/validation-guide.md` | è‡ªåŠ¨åŒ–éªŒè¯ç³»ç»Ÿä½¿ç”¨ |

### å¼€å‘è§„èŒƒ

è¯¦è§ `.claude/rules/` ç›®å½•ï¼š

- **base.md** - æŠ€æœ¯æ ˆçº¦æŸå’Œ API ç‰ˆæœ¬è¦æ±‚
- **code.md** - ä»£ç é£æ ¼ã€å‘½åçº¦å®šå’Œæœ€ä½³å®è·µ
- **error-patterns.md** - æ‰€æœ‰å·²çŸ¥çš„é”™è¯¯æ¨¡å¼å’Œè§£å†³æ–¹æ¡ˆ
- **quick-reference.md** - å¿«é€Ÿå‚è€ƒï¼Œå¼€å‘å‰å¿…è¯» â­

---

## âš ï¸ é‡è¦æç¤º

### å·¥ä½œæµç”»å¸ƒç›¸å…³

1. **èŠ‚ç‚¹è¿æ¥éªŒè¯**: æ¯ä¸ªè¾“å…¥ç«¯å£åªèƒ½è¿æ¥ç‰¹å®šç±»å‹çš„èŠ‚ç‚¹ï¼Œæ— æ•ˆè¿æ¥ä¼šè¢«è‡ªåŠ¨æ¸…é™¤
2. **æ•°æ®ä¼ é€’**: æºèŠ‚ç‚¹çŠ¶æ€å˜åŒ–æ—¶ï¼Œç›®æ ‡èŠ‚ç‚¹ä¼šè‡ªåŠ¨æ›´æ–°
3. **å·¥ä½œæµè‡ªåŠ¨ä¿å­˜**: ä¼˜åŒ–å®Œæˆåè‡ªåŠ¨ä¿å­˜åˆ° localStorage
4. **æ—ç™½æ¨¡å¼**: è§†é¢‘ç”ŸæˆèŠ‚ç‚¹æ˜¾ç¤º"ğŸ“º æ—ç™½æ¨¡å¼"æ—¶ï¼Œå¯åŠ è½½å½“å‰å¥å­æˆ–ä¸‹ä¸€ä¸ªå¥å­

### API ç›¸å…³

1. **è½®è¯¢é—´éš”**: å»ºè®®ä½¿ç”¨ 30 ç§’é—´éš”ï¼Œè¿‡çŸ­ä¼šå¯¼è‡´ 429 Rate Limit é”™è¯¯
2. **åŒå¹³å°å·®å¼‚**:
   - èšé‘«ä½¿ç”¨ `sora-2-all` æ¨¡å‹
   - è´è´ä½¿ç”¨ `sora-2` æˆ– `sora-2-pro` æ¨¡å‹
3. **è§’è‰²å¼•ç”¨æ ¼å¼**: `@username`ï¼ˆä¸å¸¦èŠ±æ‹¬å·ï¼‰

### æ•°æ®æŒä¹…åŒ–

1. **å†å²è®°å½•**: è§†é¢‘åˆ›å»ºæˆåŠŸåè‡ªåŠ¨ä¿å­˜
2. **è§’è‰²åº“**: è§’è‰²åˆ›å»ºæˆåŠŸåè‡ªåŠ¨ä¿å­˜
3. **å·¥ä½œæµ**: ä¿å­˜åˆ°æµè§ˆå™¨ localStorage

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run server

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd src/client && npm run dev

# è¿è¡ŒéªŒè¯ â­ Phase 3
npm run validate:all

# æ‰«æå¯ä¿®å¤é—®é¢˜
npm run fix:scan

# æŸ¥çœ‹æŒ‡æ ‡è¶‹åŠ¿
npm run metrics:trend

# å¯åŠ¨ Electron åº”ç”¨ï¼ˆæ‰“åŒ…ç”¨ï¼‰
npm start
```

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js**: >= 16.0.0
- **Express**: ^4.18.2
- **axios**: ^1.6.5
- **dotenv**: ^17.2.3
- **form-data**: ^4.0.0

### å‰ç«¯ï¼ˆå·¥ä½œæµç”»å¸ƒï¼‰â­ æ ¸å¿ƒ
- **React**: ^19.0.0
- **React Flow**: ^11.0.0
- **Vite**: ^5.0.0
- **Tailwind CSS**: ^3.4.0ï¼ˆå¯é€‰ï¼‰

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ‰ è‡´è°¢

- [Sora2 API](https://sora.chatgpt.com/) - è§†é¢‘ç”Ÿæˆ API
- [React Flow](https://reactflow.dev/) - å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨
- åŸç‰ˆ WinJin AIGC é¡¹ç›®

---

**ç‰ˆæœ¬**: 2.0.0 (å·¥ä½œæµç”»å¸ƒç‰ˆ)
**æœ€åæ›´æ–°**: 2026-01-09
**åŸé¡¹ç›®**: å½’æ¡£äº `reference/` ç›®å½•
